# LINE Drive Bot (Python/Flask) ‚Äî Upload to Google Drive

‡∏£‡∏±‡∏ö‡∏£‡∏π‡∏õ/‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠/‡πÄ‡∏™‡∏µ‡∏¢‡∏á/‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ LINE ‡πÅ‡∏•‡πâ‡∏ß‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏Ç‡πâ‡∏≤‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå Google Drive ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
‡∏£‡∏±‡∏ô‡∏ö‡∏ô **Render (Free Plan)** ‡πÑ‡∏î‡πâ

---

## üöÄ Deploy to Render (Blueprint)

> ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á (‡∏õ‡∏£‡∏±‡∏ö‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô GitHub repo ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏≠‡∏á‡∏Å‡πà‡∏≠‡∏ô)

[![Deploy to Render](https://render.com/images/deploy-to-render-button.svg)](https://render.com/deploy?repo=https://github.com/USERNAME/line-drive-bot)

> ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏õ‡∏∏‡πà‡∏°:
> 1) Fork/‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î repo ‡∏ô‡∏µ‡πâ‡πÑ‡∏õ GitHub ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `USERNAME`)  
> 2) ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô ‚Üí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ ‚Üí Render ‡∏à‡∏∞‡∏≠‡πà‡∏≤‡∏ô `render.yaml` ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á Web Service ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

---

## üß± ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á
```
.
‚îú‚îÄ app.py
‚îú‚îÄ requirements.txt
‚îú‚îÄ render.yaml
‚îú‚îÄ .env.example
‚îî‚îÄ .gitignore
```

## üîë ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°
### LINE Developers
- ‡∏™‡∏£‡πâ‡∏≤‡∏á **Messaging API channel**
- ‡πÄ‡∏õ‡∏¥‡∏î **Use Webhook**
- ‡πÄ‡∏Å‡πá‡∏ö **Channel secret** ‡πÅ‡∏•‡∏∞ **Channel access token**

### Google Cloud & Drive
- ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ **Google Drive API**
- ‡∏™‡∏£‡πâ‡∏≤‡∏á **Service Account** ‡πÅ‡∏•‡∏∞‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î **JSON key**
- ‡πÉ‡∏ô Google Drive: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á ‚Üí **‡πÅ‡∏ä‡∏£‡πå‡πÉ‡∏´‡πâ Service Account (Editor)**  
- ‡∏à‡∏î **Folder ID** ‡∏Ç‡∏≠‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á

---

## ‚öôÔ∏è ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏° (Environment)
‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà Render ‚Üí *Environment*

- `LINE_CHANNEL_SECRET` = ‡∏à‡∏≤‡∏Å LINE Console
- `LINE_CHANNEL_ACCESS_TOKEN` = ‡∏à‡∏≤‡∏Å LINE Console
- `GDRIVE_FOLDER_ID` = ‡πÑ‡∏≠‡∏î‡∏µ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡πÉ‡∏ô Google Drive
- `GOOGLE_APPLICATION_CREDENTIALS` = `/etc/secrets/service-account.json`

### Secret File (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç)
Render ‚Üí *Environment* ‚Üí **Add Secret File**  
- **Path**: `/etc/secrets/service-account.json`  
- **Content**: ‡∏ß‡∏≤‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÑ‡∏ü‡∏•‡πå JSON ‡∏Ç‡∏≠‡∏á Service Account

> ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Render ‡∏à‡∏∞‡∏£‡∏µ‡∏î‡∏µ‡∏û‡∏•‡∏≠‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

---

## üîå Webhook URL (LINE)
‡∏´‡∏•‡∏±‡∏á‡∏î‡∏µ‡∏û‡∏•‡∏≠‡∏¢‡∏ö‡∏ô Render ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡πÑ‡∏î‡πâ URL ‡πÄ‡∏ä‡πà‡∏ô  
`https://your-app.onrender.com`

- ‡∏ï‡∏±‡πâ‡∏á **Webhook URL** ‡πÄ‡∏õ‡πá‡∏ô `https://your-app.onrender.com/webhook`
- ‡∏Å‡∏î **Verify** ‚Üí ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô Success
- ‡πÄ‡∏õ‡∏¥‡∏î **Use webhook**

---

## üß™ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- ‡πÅ‡∏≠‡∏î LINE Bot ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô
- ‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ/‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠/‡πÄ‡∏™‡∏µ‡∏¢‡∏á/‡πÑ‡∏ü‡∏•‡πå
- ‡∏ï‡∏£‡∏ß‡∏à‡πÉ‡∏ô Google Drive ‡∏ß‡πà‡∏≤‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á

---

## üõ†Ô∏è ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
- ‡∏ï‡∏±‡πâ‡∏á‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡πâ Anyone with the link: ‡πÄ‡∏õ‡∏¥‡∏î‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡πÉ‡∏ô `app.py` ‡∏™‡πà‡∏ß‡∏ô `permissions().create(...)`
- ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤/‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ: ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ `filename` ‡πÉ‡∏ô handler ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞ MIME ‡∏ö‡∏≤‡∏á‡∏ä‡∏ô‡∏¥‡∏î: ‡πÄ‡∏ä‡πá‡∏Ñ `content_type` ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏Å‡πà‡∏≠‡∏ô‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î
- ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏ç‡πà‡∏°‡∏≤‡∏Å: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `resumable=True`

---

## üêû Troubleshooting
- **InvalidSignatureError**: ‡∏ï‡∏£‡∏ß‡∏à `LINE_CHANNEL_SECRET` ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á ‡πÅ‡∏•‡∏∞ Webhook URL ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô HTTPS
- **‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå**: ‡∏•‡∏∑‡∏°‡πÅ‡∏ä‡∏£‡πå‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏´‡πâ Service Account ‡πÄ‡∏õ‡πá‡∏ô Editor
- **403 ‡∏à‡∏≤‡∏Å Git push**: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå GitHub/‡∏£‡∏µ‡πÇ‡∏°‡∏ï/‡πÉ‡∏ä‡πâ PAT ‡∏´‡∏£‡∏∑‡∏≠ SSH
- **Render Sleep (Free Plan)**: ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏∞‡∏ï‡∏∑‡πà‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ request ‡πÄ‡∏Ç‡πâ‡∏≤ (‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏á‡∏¥‡∏ô)

---

## üìù License
MIT
